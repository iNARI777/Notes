# Kafka 基础知识笔记

## Kafka 的组成



## Kafka 为什么快

**生产者方面**：

Kafka 生产者写入是顺序写入，减少了随机寻址，对于机械硬盘的机器来说，顺序 IO 是可以大幅加快读写速度的。

另外，Kafka 写入数据的时候是写入到内存映射文件中的，内存映射文件的读写效率都要高于普通文件的读写。

> 内存映射文件（ mmap 函数调用）：
> 其原理是将 *逻辑内存* 中的一部分与磁盘上的文件进行映射，读的时候通过缺页中断直接从磁盘上将文件读入内存。
> 一般文件的写需要经过先读写用户态空间，之后进入内核态空间再进行一次复制，而内存映射文件就进行一次写就可以了。
> 因此内存映射文件的读写是很快的。

**消费者方面**：

Kafka 向消费者发送数据的时候使用了 Zero Copy 的技术，也是不经用户态，直接通过内核态将 socket 数据发送出去，获得了很快的速度。

同时，通过设置 Kafka 的最小文件发送块可以等待待发送的文件积攒到一定大小之后再一并发送出去，减小了多次发送的网络开销。

## 参考资料
[1] [Kafka史上最详细原理总结](https://blog.csdn.net/ychenfeng/article/details/74980531)
